<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leaflet Static Map</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <style>
        #map { height: 90vh; }
        #loadMarkersBtn, #tsunamiBtn { 
            position: absolute; top: 10px; padding: 10px; background: blue; color: white; cursor: pointer; 
        }
        #tsunamiBtn { left: 120px; background: red; }
    </style>
</head>
<body>

<button id="loadMarkersBtn">Load Markers</button>
<button id="tsunamiBtn">Tsunami</button>
<div id="map"></div>

<script>
    var map = L.map('map', {
        crs: L.CRS.Simple,
        minZoom: -2,
        maxZoom: 2
    });

    var bounds = [[-8000, -4000], [8000, 4000]];
    var image = L.imageOverlay("map.png", bounds).addTo(map);
    map.fitBounds(bounds);

    var markers = {}; 

    document.getElementById("loadMarkersBtn").addEventListener("click", function() {
        fetch("markers.json")
            .then(response => response.json())
            .then(data => {
                data.forEach(marker => {
                    var m = L.marker([marker.y, marker.x]).addTo(map)
                        .bindPopup(marker.name)
                        .on('contextmenu', function() { removeMarker(marker.id); });
                    markers[marker.id] = m;
                });
            })
            .catch(err => console.error("Error loading markers:", err));
    });

    function removeMarker(id) {
        if (markers[id]) {
            map.removeLayer(markers[id]);
            delete markers[id];
        }
    }

    document.getElementById("tsunamiBtn").addEventListener("click", function() {
        var password = prompt("Masukkan password:");
        if (password === "absb") {
            Object.values(markers).forEach(marker => map.addLayer(marker));
        } else {
            alert("Password salah!");
        }
    });
</script>

</body>
</html>
